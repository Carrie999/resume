(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.locallyjs=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var LZString=function(){var f=String.fromCharCode;var keyStrBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";var baseReverseDic={};function getBaseValue(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(var i=0;i<alphabet.length;i++){baseReverseDic[alphabet][alphabet.charAt(i)]=i}}return baseReverseDic[alphabet][character]}var LZString={compressToBase64:function(input){if(input==null)return"";var res=LZString._compress(input,6,function(a){return keyStrBase64.charAt(a)});switch(res.length%4){default:case 0:return res;case 1:return res+"===";case 2:return res+"==";case 3:return res+"="}},decompressFromBase64:function(input){if(input==null)return"";if(input=="")return null;return LZString._decompress(input.length,32,function(index){return getBaseValue(keyStrBase64,input.charAt(index))})},compressToUTF16:function(input){if(input==null)return"";return LZString._compress(input,15,function(a){return f(a+32)})+" "},decompressFromUTF16:function(compressed){if(compressed==null)return"";if(compressed=="")return null;return LZString._decompress(compressed.length,16384,function(index){return compressed.charCodeAt(index)-32})},compressToUint8Array:function(uncompressed){var compressed=LZString.compress(uncompressed);var buf=new Uint8Array(compressed.length*2);for(var i=0,TotalLen=compressed.length;i<TotalLen;i++){var current_value=compressed.charCodeAt(i);buf[i*2]=current_value>>>8;buf[i*2+1]=current_value%256}return buf},decompressFromUint8Array:function(compressed){if(compressed===null||compressed===undefined){return LZString.decompress(compressed)}else{var buf=new Array(compressed.length/2);for(var i=0,TotalLen=buf.length;i<TotalLen;i++){buf[i]=compressed[i*2]*256+compressed[i*2+1]}var result=[];buf.forEach(function(c){result.push(f(c))});return LZString.decompress(result.join(""))}},compressToEncodedURIComponent:function(input){if(input==null)return"";return LZString._compress(input,6,function(a){return keyStrUriSafe.charAt(a)})},decompressFromEncodedURIComponent:function(input){if(input==null)return"";if(input=="")return null;input=input.replace(/ /g,"+");return LZString._decompress(input.length,32,function(index){return getBaseValue(keyStrUriSafe,input.charAt(index))})},compress:function(uncompressed){return LZString._compress(uncompressed,16,function(a){return f(a)})},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(uncompressed==null)return"";var i,value,context_dictionary={},context_dictionaryToCreate={},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0,ii;for(ii=0;ii<uncompressed.length;ii+=1){context_c=uncompressed.charAt(ii);if(!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)){context_dictionary[context_c]=context_dictSize++;context_dictionaryToCreate[context_c]=true}context_wc=context_w+context_c;if(Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)){context_w=context_wc}else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}context_dictionary[context_wc]=context_dictSize++;context_w=String(context_c)}}if(context_w!==""){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}}value=2;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}while(true){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}else context_data_position++}return context_data.join("")},decompress:function(compressed){if(compressed==null)return"";if(compressed=="")return null;return LZString._decompress(compressed.length,32768,function(index){return compressed.charCodeAt(index)})},_decompress:function(length,resetValue,getNextValue){var dictionary=[],next,enlargeIn=4,dictSize=4,numBits=3,entry="",result=[],i,w,bits,resb,maxpower,power,c,data={val:getNextValue(0),position:resetValue,index:1};for(i=0;i<3;i+=1){dictionary[i]=i}bits=0;maxpower=Math.pow(2,2);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(next=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 2:return""}dictionary[3]=c;w=c;result.push(c);while(true){if(data.index>length){return""}bits=0;maxpower=Math.pow(2,numBits);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(c=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 2:return result.join("")}if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++}if(dictionary[c]){entry=dictionary[c]}else{if(c===dictSize){entry=w+w.charAt(0)}else{return null}}result.push(entry);dictionary[dictSize++]=w+entry.charAt(0);enlargeIn--;w=entry;if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++}}}};return LZString}();if(typeof define==="function"&&define.amd){define(function(){return LZString})}else if(typeof module!=="undefined"&&module!=null){module.exports=LZString}},{}],2:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],3:[function(require,module,exports){"use strict";(function(){var ls=typeof window!=="undefined"?window.localStorage:null,ms=require("ms"),lzstring=require("lz-string");if(!ls){ls={_data:{},setItem:function setItem(id,val){return this._data[id]=String(val)},getItem:function getItem(id){return this._data.hasOwnProperty(id)?this._data[id]:undefined},removeItem:function removeItem(id){return delete this._data[id]},key:function key(index){for(var key in this_data){if(!index--){return key}}},clear:function clear(){return this._data={}}}}var utils={each:function each(arr,iteratee){var l=arr.length;while(l--)iteratee(arr[l],l)},map:function map(arr,iteratee){var newArr=new Array(arr.length),l=arr.length;while(l--)newArr[l]=iteratee(arr[l],l);return newArr},filter:function filter(arr,iteratee){var newArr=[],l=arr.length;while(l--){if(iteratee(arr[l],l))newArr.push(arr[l])}return newArr}};var _keys,_config,_compressAll,_timeouts={};var Locally=function Locally(options){options=options||{};_compressAll=options.compress;_config=ls.getItem("locally-config");if(!_config){_config={};_rebuildConfig()}else{var deconfig=lzstring.decompressFromUTF16(_config);try{_config=JSON.parse(deconfig||_config)}catch(e){if(!!deconfig){try{_config=JSON.parse(_config)}catch(e){throw new Error("Locally: config is corrupted")}}else throw new Error("Locally: config is corrupted")}_rebuildConfig()}_saveConfig();Object.defineProperty(this,"length",{get:function get(){return _keys.length}})};Locally.prototype.set=function(key,value,options){if(arguments.length<2)throw new Error("Locally: no key or value given");options=options||{};if(typeof options!=="object"){options={ttl:options}}if(typeof options.ttl==="string"){options.ttl=ms(options.ttl)}_config[key]=_config[key]||{};if(_keys.indexOf(key)==-1){_keys.push(key)}if(options.ttl&&!isNaN(options.ttl)){_clearTimeout(key);_setTimeout(key,options.ttl)}else if(_config[key].ttl){_clearTimeout(key)}var res=_getType(value);value=res.value;_config[key].t=res.type;if(options.compress||_compressAll){_config[key].c=1;value=lzstring.compressToUTF16(value.toString())}key=String(key);value=String(value);ls.setItem(key,value);_saveConfig()};Locally.prototype.get=function(key){return Array.isArray(key)?utils.map(key,function(item){return _get(item)}.bind(this)):_get(key)};Locally.prototype.keys=function(pattern){if(!pattern||pattern=="*")return _keys.slice(0);if(!(pattern instanceof RegExp)){pattern=new RegExp(".*"+pattern+".*")}return utils.filter(_keys,function(key){return pattern.test(key)})};Locally.prototype.remove=function(key){if(typeof key==="undefined")throw new Error("Locally: 'remove' requires a key");if(Array.isArray(key)){utils.each(key,_remove)}else{_remove(key)}};Locally.prototype.scan=function(key,fn){return utils.each(this.keys(key),function(key){fn(_get(key),key)})};Locally.prototype.ttl=function(key,returnString){return _config[key]?_config[key].ttl?!returnString?_config[key].ttl-Date.now():ms(_config[key].ttl-Date.now()):-1:-2};Locally.prototype.persist=function(key){return _config[key]?delete _config[key].ttl&&_saveConfig()&&_clearTimeout(key):false};Locally.prototype.expire=function(key,ttl){return _config[key]?!!(_config[key].ttl=Date.now()+ttl)&&_saveConfig():false};Locally.prototype.clear=function(){ls.clear();_config={};_keys=[];return _saveConfig()};Locally.prototype.key=function(index){return _keys[index]};function _remove(key){var i=_keys.indexOf(key);if(i>-1){ls.removeItem(key);_keys.splice(_keys.indexOf(key),1);delete _config[key]}}function _saveConfig(){ls.setItem("locally-config",lzstring.compressToUTF16(JSON.stringify(_config)));return true}function _get(key){if(typeof key==="undefined"||!_config[key])return null;if(_config[key].ttl&&_config[key].ttl<Date.now()){delete _config[key];_saveConfig();_remove(key);return null}var temp,value=_config[key].c?lzstring.decompressFromUTF16(ls.getItem(key)):ls.getItem(key);switch(_config[key].t){case"o":try{value=JSON.parse(value)}catch(e){}return value;break;case"d":return new Date(parseInt(value,10));break;case"r":return new RegExp(value.substring(1,value.length-1));break;case"f":eval("temp = "+value);return temp;break;case"n":return Number(value);break;case"b":return value=="1";break;case"s":default:if(value==="null")return null;else if(value==="undefined")return undefined;else return String(value);break}}function _getType(value){var type;switch(typeof value){case"object":if(value instanceof Date){value=value.getTime();type="d"}else if(value instanceof RegExp){value=value.toString();type="r"}else{value=JSON.stringify(value);type="o"}break;case"function":type="f";break;case"number":type="n";break;case"boolean":value=value?1:0;type="b";break;case"string":default:type="s"}return{value:value,type:type}}function _rebuildConfig(){var l=ls.length;_keys=new Array(l);while(l--){_keys[l]=ls.key(l);_config[_keys[l]]=_config[_keys[l]]||{};if(_compressAll&&!_config[_keys[l]].c){_config[_keys[l]].c=true;ls.setItem(_keys[l],lzstring.compressToUTF16(ls.getItem(_keys[l])))}else if(!_compressAll&&_config[_keys[l]].c){delete _config[_keys[l]].c;ls.setItem(_keys[l],lzstring.decompressFromUTF16(ls.getItem(_keys[l])))}if(_config[_keys[l]].ttl){_setTimeout(_keys[l],_config[_keys[l]].ttl-Date.now())}}if(_keys.indexOf("locally-config")>-1){_keys.splice(_keys.indexOf("locally-config"),1)}}function _setTimeout(key,ttl){_config[key].ttl=Date.now()+ttl;_timeouts[key]=setTimeout(function(){_remove(key)},ttl)}function _clearTimeout(key){if(_keys.indexOf(key)>-1){clearTimeout(_timeouts[key]);delete _timeouts[key];delete _config[key].ttl;return true}else return false}if(typeof exports==="object"){module.exports.Store=Locally}if(typeof define==="function"&&define.amd){define(function(){return{Store:Locally}})}if(typeof window==="object"){window.Locally={Store:Locally}}})()},{"lz-string":1,ms:2}]},{},[3])(3)});