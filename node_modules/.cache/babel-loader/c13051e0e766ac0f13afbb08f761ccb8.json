{"ast":null,"code":"import _classCallCheck from \"/Users/bytedance/Desktop/my-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/bytedance/Desktop/my-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/bytedance/Desktop/my-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/bytedance/Desktop/my-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/bytedance/Desktop/my-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _objectWithoutProperties from \"/Users/bytedance/Desktop/my-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/bytedance/Desktop/my-admin/src/pages/Login/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport styles from './styles/index.module.less';\nimport MeteorShower from './star';\nimport { Form, Icon, Input, Button } from 'antd';\n\nvar Store = require('locallyjs').Store,\n    store = new Store();\n\nvar fakeAuth = {\n  isAuthenticated: store.get('isLoggedIn') || false,\n  authenticate: function authenticate(cb) {\n    this.isAuthenticated = true;\n    setTimeout(cb, 100);\n  },\n  signout: function signout(cb) {\n    this.isAuthenticated = false;\n    setTimeout(cb, 100);\n  }\n};\nexport var PrivateRoute = function PrivateRoute(_ref) {\n  var Component = _ref.component,\n      rest = _objectWithoutProperties(_ref, [\"component\"]);\n\n  return /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    render: function render(props) {\n      return (// fakeAuth.isAuthenticated === true\n        true ? /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 9\n          }\n        })) : /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: '/login',\n            state: {\n              from: props.location\n            }\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 9\n          }\n        })\n      );\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 3\n    }\n  }));\n};\n\nvar Login = /*#__PURE__*/function (_Component) {\n  _inherits(Login, _Component);\n\n  var _super = _createSuper(Login);\n\n  function Login() {\n    var _temp, _this2;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _possibleConstructorReturn(_this2, (_temp = _this2 = _super.call.apply(_super, [this].concat(args)), _this2.state = {\n      redirectToReferrer: false\n    }, _this2.componentDidMount = function () {}, _this2.login = function () {\n      store.set('isLoggedIn', true); // 3天过期\n\n      store.expire('isLoggedIn', 1000 * 60 * 60 * 24 * 3);\n      fakeAuth.authenticate(function () {\n        _this2.setState(function () {\n          return {\n            redirectToReferrer: true\n          };\n        });\n      });\n    }, _temp));\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var _ref2 = this.props.location.state || {\n        from: {\n          pathname: '/'\n        }\n      },\n          from = _ref2.from;\n\n      var redirectToReferrer = this.state.redirectToReferrer;\n\n      if (redirectToReferrer === true) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: from,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 14\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.loginWrap,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(MeteorShower, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"h2\", {\n        className: styles.projectName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }\n      }, \"\\u540E\\u53F0\\u7BA1\\u7406\\u5E73\\u53F0\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.box,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(WrappedNormalLoginForm, {\n        login: this.login,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nvar NormalLoginForm = /*#__PURE__*/function (_React$Component) {\n  _inherits(NormalLoginForm, _React$Component);\n\n  var _super2 = _createSuper(NormalLoginForm);\n\n  function NormalLoginForm() {\n    var _temp2, _this3;\n\n    _classCallCheck(this, NormalLoginForm);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _possibleConstructorReturn(_this3, (_temp2 = _this3 = _super2.call.apply(_super2, [this].concat(args)), _this3.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this3.props.form.validateFields(function (err, values) {\n        if (!err) {\n          _this3.props.login();\n\n          localStorage.setItem('username', '织雪纱奈');\n          console.log('Received values of form: ', values);\n        }\n      });\n    }, _temp2));\n  }\n\n  _createClass(NormalLoginForm, [{\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        className: styles['login-form'],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }\n      }, getFieldDecorator('userName', {\n        rules: [{\n          required: true,\n          message: 'Please input your username!'\n        }]\n      })( /*#__PURE__*/React.createElement(Input, {\n        prefix: /*#__PURE__*/React.createElement(Icon, {\n          type: \"user\",\n          style: {\n            color: 'rgba(0,0,0,.25)'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 28\n          }\n        }),\n        placeholder: \"\\u7528\\u6237\\u540D\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }\n      }, getFieldDecorator('password', {\n        rules: [{\n          required: true,\n          message: 'Please input your Password!'\n        }]\n      })( /*#__PURE__*/React.createElement(Input, {\n        prefix: /*#__PURE__*/React.createElement(Icon, {\n          type: \"lock\",\n          style: {\n            color: 'rgba(0,0,0,.25)'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 28\n          }\n        }),\n        type: \"password\",\n        placeholder: \"\\u5BC6\\u7801\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        className: styles['login-form-button'],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }\n      }, \"\\u767B\\u9646\")));\n    }\n  }]);\n\n  return NormalLoginForm;\n}(React.Component);\n\nvar WrappedNormalLoginForm = Form.create({\n  name: 'normal_login'\n})(NormalLoginForm);\nexport default Login;","map":{"version":3,"sources":["/Users/bytedance/Desktop/my-admin/src/pages/Login/index.js"],"names":["React","Component","Route","Redirect","styles","MeteorShower","Form","Icon","Input","Button","Store","require","store","fakeAuth","isAuthenticated","get","authenticate","cb","setTimeout","signout","PrivateRoute","component","rest","props","pathname","state","from","location","Login","redirectToReferrer","componentDidMount","login","set","expire","setState","loginWrap","projectName","box","NormalLoginForm","handleSubmit","e","preventDefault","form","validateFields","err","values","localStorage","setItem","console","log","getFieldDecorator","rules","required","message","color","WrappedNormalLoginForm","create","name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Route, Redirect } from 'react-router-dom'\nimport styles from './styles/index.module.less';\nimport MeteorShower from './star'\nimport {\n  Form, Icon, Input, Button,\n} from 'antd';\n\nconst Store = require('locallyjs').Store,\n      store = new Store()\nconst fakeAuth = {\n  isAuthenticated: store.get('isLoggedIn') || false,\n  authenticate(cb) {\n    this.isAuthenticated = true\n    setTimeout(cb, 100)\n  },\n  signout(cb) {\n    this.isAuthenticated = false\n    setTimeout(cb, 100)\n  }\n}\n\nexport const PrivateRoute = ({ component: Component, ...rest }) => (\n  <Route {...rest} render={(props) => (\n    // fakeAuth.isAuthenticated === true\n    true\n      ? <Component {...props} />\n      : <Redirect to={{\n        pathname: '/login',\n        state: { from: props.location }\n      }} \n      />\n  )} />\n)\n\nclass Login extends Component {\n  state = {\n    redirectToReferrer: false\n  }\n  \n  componentDidMount = () => {\n   \n  }\n\n  login = () => {\n    store.set('isLoggedIn', true);\n    // 3天过期\n    store.expire('isLoggedIn', 1000*60*60*24*3); \n    fakeAuth.authenticate(() => {\n      this.setState(() => ({\n        redirectToReferrer: true\n      }))\n    })\n  }\n\n  render() {  \n    const { from } = this.props.location.state || { from: { pathname: '/' } }\n    const { redirectToReferrer } = this.state\n\n    if (redirectToReferrer === true) {\n      return <Redirect to={from} />\n    }\n\n    return (\n      <div className={styles.loginWrap}>\n        <MeteorShower></MeteorShower>\n        <h2 className={styles.projectName}>后台管理平台</h2> \n        <div className={styles.box}>\n          <WrappedNormalLoginForm login={this.login}/>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nclass NormalLoginForm extends React.Component {\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        this.props.login()\n        localStorage.setItem('username','织雪纱奈')\n        console.log('Received values of form: ', values);\n      }\n    });\n  }\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <Form onSubmit={this.handleSubmit} className={styles['login-form']}>\n        <Form.Item>\n          {getFieldDecorator('userName', {\n            rules: [{ required: true, message: 'Please input your username!' }],\n          })(\n            <Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"用户名\" />\n          )}\n        </Form.Item>\n        <Form.Item>\n          {getFieldDecorator('password', {\n            rules: [{ required: true, message: 'Please input your Password!' }],\n          })(\n            <Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"密码\" />\n          )}\n        </Form.Item>\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" \n            className={styles['login-form-button']}>\n            登陆\n          </Button>\n        </Form.Item>\n      </Form>\n    );\n  }\n}\n\nconst WrappedNormalLoginForm = Form.create({ name: 'normal_login' })(NormalLoginForm);\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}